!function(){"use strict";angular.module("app",["ui.sortable"])}(),function(){"use strict";function e(e,t,n,o,a,u){function r(e,t){v.authToken=t,c(t),l()}function i(e,t){var n=angular.extend({},v.resume.sections[t]);v.resume.sections.splice(t,0,n),f(n,t)}function s(e,t){v.resume.sections.splice(t,1),d(t)}function c(e){a.getResumeData(e).then(function(e){v.resume=e})}function l(){var t=angular.element("div.margins");o.getTemplate().then(function(o){t.html(o),e(t.contents())(n)})}function f(e,t){if(v.authToken&&"default"!==v.authToken){var n={authToken:v.authToken,newSection:e,sectionIndex:t};u.emit("add-section",n)}}function d(e){if(v.authToken&&"default"!==v.authToken){var t={authToken:v.authToken,sectionIndex:e};u.emit("remove-section",t)}}function m(){if(v.authToken&&"default"!==v.authToken){var e={authToken:v.authToken,sections:v.resume.sections};u.emit("sortable-event",e)}}function p(){var e=angular.element("#authToken").attr("value");t.$broadcast("auth-token",e)}function h(e){if(v.authToken&&"default"!==v.authToken){var t={authToken:v.authToken,path:e.target.getAttribute("data"),val:e.target.innerHTML};u.emit("value-change",t)}}var g=t,v=this;v.authToken="",v.resume,v.init=p,v.emit=h,v.sortableSections={axis:"y",tolerance:"intersect",handle:".section-handle",cancel:".section-title",stop:function(e,t){m()}},g.$on("auth-token",r),g.$on("section added",i),g.$on("section removed",s)}angular.module("app").controller("appCtrl",e),e.$inject=["$compile","$rootScope","$scope","layoutService","resumeService","socket"]}(),function(){"use strict";function e(e,t,n,o){function a(t){angular.element("#authToken").attr("value",t),e.$broadcast("auth-token",t)}function u(e){angular.element(e).modal("hide"),r(),i()}function r(){angular.element("#suPassword").tooltip("hide"),m.suUsername="",m.suPassword="",m.suError=""}function i(){m.liUsername="",m.liPassword="",m.liError=""}function s(){n.signup(m.suUsername,m.suPassword).then(function(e){e.message?m.suError=e.message:(a(e.id),u("#suModal"))})}function c(){n.login(m.liUsername,m.liPassword).then(function(e){e.message?m.liError=e.message:(a(e.id),u("#liModal"))})}function l(){n.logout().then(function(){angular.element("#authToken").attr("value","default"),e.$broadcast("auth-token","default")})}function f(e){e.target.value.length<6?angular.element(e.target).tooltip("show"):angular.element(e.target).tooltip("hide")}function d(){var e={username:m.suUsername};o.emit("username",e)}var m=this,p=angular.element("#suUsername");m.suUsername,m.suPassword,m.suUsernameError="",m.suError="",m.liUsername,m.liPassword,m.liError="",m.signup=s,m.login=c,m.logout=l,m.suTooltip=f,m.validateUser=d,o.on("username available",function(){p.removeClass("unavailable")}),o.on("username unavailable",function(e){p.addClass("unavailable")})}angular.module("app").controller("authCtrl",e),e.$inject=["$rootScope","$scope","authService","socket"]}(),function(){"use strict";function e(e){function t(t,n,o){t.add=function(t,n){e.$broadcast("section added",n)},n.parent().bind("mouseenter",function(){n.show()}),n.parent().bind("mouseleave",function(){n.hide()})}return{restrict:"E",template:'<button type="button" class="close"><span>+</span></button>',link:t}}angular.module("app").directive("prAdd",e),e.$inject=["$rootScope"]}(),function(){"use strict";function e(e){function t(t,n,o){t.remove=function(t,n){e.$broadcast("section removed",n)},n.parent().bind("mouseenter",function(){n.show()}),n.parent().bind("mouseleave",function(){n.hide()})}return{restrict:"E",template:'<button type="button" class="close"><span>Ã—</span></button>',link:t}}angular.module("app").directive("prRemove",e),e.$inject=["$rootScope"]}(),function(){"use strict";function e(e){return function(t){return e.trustAsHtml(t)}}angular.module("app").filter("unescaped",e),e.$inject=["$sce"]}(),function(){"use strict";function e(e,t){function n(n,o){var a={username:n,password:o};return e.post("/signup",a).then(function(e){return e.data},function(e){return t.error("XHR Failed for authService.signup"),e.data})}function o(n,o){var a={username:n,password:o};return e.post("/login",a).then(function(e){return e.data},function(e){return t.error("XHR Failed for authService.login"),e.data})}function a(){return e.post("/logout")["catch"](function(){t.error("XHR Failed for authService.logout")})}return{signup:n,login:o,logout:a}}angular.module("app").factory("authService",e),e.$inject=["$http","$log"]}(),function(){"use strict";function e(e,t){function n(n){var n=n||"default";return e.get("/template?templateID="+n).then(function(e){return e.data})["catch"](function(){t.error("XHR Failed for getTemplate")})}return{getTemplate:n}}angular.module("app").factory("layoutService",e),e.$inject=["$http","$log"]}(),function(){"use strict";function e(e,t){function n(n){var o={authToken:n};return e.post("/resume",o).then(function(e){return e.data})["catch"](function(){t.error("XHR Failed for getResumeData")})}return{getResumeData:n}}angular.module("app").factory("resumeService",e),e.$inject=["$http","$log"]}(),function(){"use strict";function e(e){function t(t,n){o.on(t,function(){var t=arguments;e.$apply(function(){n.apply(o,t)})})}function n(t,n,a){o.emit(t,n,function(){var t=arguments;e.$apply(function(){a&&a.apply(o,t)})})}var o=io.connect();return{on:t,emit:n}}angular.module("app").factory("socket",e),e.$inject=["$rootScope"]}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpzL21vZHVsZXMvYXBwLm1vZHVsZS5qcyIsImpzL2NvbnRyb2xsZXJzL2FwcC5jb250cm9sbGVyLmpzIiwianMvY29udHJvbGxlcnMvYXV0aC5jb250cm9sbGVyLmpzIiwianMvZGlyZWN0aXZlcy9hZGQuZGlyZWN0aXZlLmpzIiwianMvZGlyZWN0aXZlcy9yZW1vdmUuZGlyZWN0aXZlLmpzIiwianMvZmlsdGVycy91bmVzY2FwZWQuZmlsdGVyLmpzIiwianMvc2VydmljZXMvYXV0aC5zZXJ2aWNlLmpzIiwianMvc2VydmljZXMvbGF5b3V0LnNlcnZpY2UuanMiLCJqcy9zZXJ2aWNlcy9yZXN1bWUuc2VydmljZS5qcyIsImpzL3NlcnZpY2VzL3NvY2tldC5zZXJ2aWNlLmpzIl0sIm5hbWVzIjpbImFuZ3VsYXIiLCJtb2R1bGUiLCJhcHBDdHJsIiwiJGNvbXBpbGUiLCIkcm9vdFNjb3BlIiwiJHNjb3BlIiwibGF5b3V0U2VydmljZSIsInJlc3VtZVNlcnZpY2UiLCJzb2NrZXQiLCJvbkF1dGhUb2tlbkNoYW5nZSIsImV2ZW50IiwiYXV0aFRva2VuIiwidm0iLCJ1cGRhdGVSZXN1bWVEYXRhIiwicmVuZGVyTGF5b3V0Iiwib25TZWN0aW9uQWRkZWQiLCJzZWN0aW9uSW5kZXgiLCJuZXdTZWN0aW9uIiwiZXh0ZW5kIiwicmVzdW1lIiwic2VjdGlvbnMiLCJzcGxpY2UiLCJlbWl0QWRkU2VjdGlvbiIsIm9uU2VjdGlvblJlbW92ZWQiLCJlbWl0UmVtb3ZlU2VjdGlvbiIsImdldFJlc3VtZURhdGEiLCJ0aGVuIiwiZGF0YSIsImNvbnRhaW5lciIsImVsZW1lbnQiLCJnZXRUZW1wbGF0ZSIsImh0bWwiLCJjb250ZW50cyIsImVtaXQiLCJlbWl0U29ydGFibGVVcGRhdGUiLCJpbml0IiwiYXR0ciIsIiRicm9hZGNhc3QiLCIkZXZlbnQiLCJwYXRoIiwidGFyZ2V0IiwiZ2V0QXR0cmlidXRlIiwidmFsIiwiaW5uZXJIVE1MIiwic2NvcGUiLCJ0aGlzIiwic29ydGFibGVTZWN0aW9ucyIsImF4aXMiLCJ0b2xlcmFuY2UiLCJoYW5kbGUiLCJjYW5jZWwiLCJzdG9wIiwidWkiLCIkb24iLCJjb250cm9sbGVyIiwiJGluamVjdCIsImF1dGhDdHJsIiwiYXV0aFNlcnZpY2UiLCJ1cGRhdGVBdXRoVG9rZW4iLCJjbGVhbnVwTW9kYWwiLCJlbGVtZW50SUQiLCJtb2RhbCIsInN1Q2xlYXIiLCJsaUNsZWFyIiwidG9vbHRpcCIsInN1VXNlcm5hbWUiLCJzdVBhc3N3b3JkIiwic3VFcnJvciIsImxpVXNlcm5hbWUiLCJsaVBhc3N3b3JkIiwibGlFcnJvciIsInNpZ251cCIsIm1lc3NhZ2UiLCJpZCIsImxvZ2luIiwibG9nb3V0Iiwic3VUb29sdGlwIiwidmFsdWUiLCJsZW5ndGgiLCJ2YWxpZGF0ZVVzZXIiLCJ1c2VybmFtZSIsInN1VXNlcm5hbWVFcnJvciIsIm9uIiwicmVtb3ZlQ2xhc3MiLCJ1c2VyIiwiYWRkQ2xhc3MiLCJwckFkZCIsImxpbmsiLCJhdHRycyIsImFkZCIsInBhcmVudCIsImJpbmQiLCJzaG93IiwiaGlkZSIsInJlc3RyaWN0IiwidGVtcGxhdGUiLCJkaXJlY3RpdmUiLCJwclJlbW92ZSIsInJlbW92ZSIsInVuZXNjYXBlZCIsIiRzY2UiLCJ0cnVzdEFzSHRtbCIsImZpbHRlciIsIiRodHRwIiwiJGxvZyIsInBhc3N3b3JkIiwicG9zdCIsInJlc3BvbnNlIiwiZXJyb3IiLCJmYWN0b3J5IiwiZ2V0IiwiZXZlbnROYW1lIiwiY2FsbGJhY2siLCJhcmdzIiwiYXJndW1lbnRzIiwiJGFwcGx5IiwiYXBwbHkiLCJpbyIsImNvbm5lY3QiXSwibWFwcGluZ3MiOiJDQUFBLFdBQ0EsWUFFQUEsU0FDQUMsT0FBQSxPQUFBLG1CQ0pBLFdBQ0EsWUFRQSxTQUFBQyxHQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxHQTJDQSxRQUFBQyxHQUFBQyxFQUFBQyxHQUNBQyxFQUFBRCxVQUFBQSxFQUNBRSxFQUFBRixHQUNBRyxJQUdBLFFBQUFDLEdBQUFMLEVB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LFNBQUEsUUFBQSxXQ1BBLFdBQ0EsWUFRQSxTQUFBL0MsR0FBQUosR0FVQSxRQUFBOEUsR0FBQTZCLEVBQUFDLEdBQ0F4RyxFQUFBMEUsR0FBQTZCLEVBQUEsV0FDQSxHQUFBRSxHQUFBQyxTQUNBOUcsR0FBQStHLE9BQUEsV0FDQUgsRUFBQUksTUFBQTVHLEVBQUF5RyxPQUtBLFFBQUFoRixHQUFBOEUsRUFBQXBGLEVBQUFxRixHQUNBeEcsRUFBQXlCLEtBQUE4RSxFQUFBcEYsRUFBQSxXQUNBLEdBQUFzRixHQUFBQyxTQUNBOUcsR0FBQStHLE9BQUEsV0FDQUgsR0FDQUEsRUFBQUksTUFBQTVHLEVBQUF5RyxPQXZCQSxHQUFBekcsR0FBQTZHLEdBQUFDLFNBRUEsUUFDQXBDLEdBQUFBLEVBQ0FqRCxLQUFBQSxHQVhBakMsUUFDQUMsT0FBQSxPQUNBNEcsUUFBQSxTQUFBckcsR0FFQUEsRUFBQStDLFNBQUEiLCJmaWxlIjoiYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcsIFsndWkuc29ydGFibGUnXSk7XG5cbn0pKCk7XG4iLCIoZnVuY3Rpb24oKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwJylcbiAgICAuY29udHJvbGxlcignYXBwQ3RybCcsIGFwcEN0cmwpO1xuXG4gIGFwcEN0cmwuJGluamVjdCA9IFsnJGNvbXBpbGUnLCAnJHJvb3RTY29wZScsICckc2NvcGUnLCAnbGF5b3V0U2VydmljZScsICdyZXN1bWVTZXJ2aWNlJywgJ3NvY2tldCddO1xuXG4gIGZ1bmN0aW9uIGFwcEN0cmwoJGNvbXBpbGUsICRyb290U2NvcGUsICRzY29wZSwgbGF5b3V0U2VydmljZSwgcmVzdW1lU2VydmljZSwgc29ja2V0KSB7XG4gICAgdmFyIHNjb3BlID0gJHJvb3RTY29wZTtcbiAgICB2YXIgdm0gPSB0aGlzO1xuXG4gICAgLyogVklFV01PREVMIEJJTkRJTkdTICovXG4gICAgdm0uYXV0aFRva2VuID0gJyc7XG4gICAgdm0ucmVzdW1lO1xuXG4gICAgdm0uaW5pdCA9IGluaXQ7XG4gICAgdm0uZW1pdCA9IGVtaXQ7XG5cbiAgICAvKiBVSS5TT1JUQUJMRSBPUFRJT05TICovXG4gICAgdm0uc29ydGFibGVTZWN0aW9ucyA9IHtcbiAgICAgIGF4aXM6ICd5JyxcbiAgICAgIHRvbGVyYW5jZTogJ2ludGVyc2VjdCcsXG4gICAgICBoYW5kbGU6ICcuc2VjdGlvbi1oYW5kbGUnLFxuICAgICAgY2FuY2VsOiAnLnNlY3Rpb24tdGl0bGUnLFxuICAgICAgc3RvcDogZnVuY3Rpb24oZXZlbnQsIHVpKSB7IC8vIHVzZSBzdG9wIGJlY2F1c2UgaXQgaXMgYWxyZWFkeSB3cmFwcGVkIHdpdGggJGFwcGx5XG4gICAgICAgIGVtaXRTb3J0YWJsZVVwZGF0ZSgpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvLyBUT0RPOiBjb252ZXJ0IHRvIGFuZ3VsYXItdWkgc29ydGFibGUgd2hlbiBzZWN0aW9ucyBpbXBsZW1lbnRhdGlvbiBpcyBmaW5pc2hlZFxuICAgIC8vICQoJy5zb3J0YWJsZUVudHJpZXMnKS5zb3J0YWJsZSh7XG4gICAgLy8gICBheGlzOiAneScsXG4gICAgLy8gICB0b2xlcmFuY2U6ICdpbnRlcnNlY3QnLFxuICAgIC8vICAgaGFuZGxlOiAnLmVudHJ5JyxcbiAgICAvLyAgIHVwZGF0ZTogZnVuY3Rpb24oZXZlbnQsIHVpKSB7XG4gICAgLy9cbiAgICAvLyAgIH1cbiAgICAvLyB9KTtcbiAgICAvL1xuICAgIC8vICQoJy5zZWN0aW9uLWhhbmRsZScpLmhvdmVyKGZ1bmN0aW9uKCkge1xuICAgIC8vICAgJCh0aGlzKS5wYXJlbnQoKS5jc3MoJ2JvcmRlci1jb2xvcicsICcjMDAwJyk7XG4gICAgLy8gfSwgZnVuY3Rpb24oKSB7XG4gICAgLy8gICAkKHRoaXMpLnBhcmVudCgpLmNzcygnYm9yZGVyLWNvbG9yJywgJ3RyYW5zcGFyZW50Jyk7XG4gICAgLy8gfSk7XG5cbiAgICAvKiBFVkVOVCBMSVNURU5FUlMgKEFOR1VMQVIpICovXG4gICAgc2NvcGUuJG9uKCdhdXRoLXRva2VuJywgb25BdXRoVG9rZW5DaGFuZ2UpO1xuICAgIHNjb3BlLiRvbignc2VjdGlvbiBhZGRlZCcsIG9uU2VjdGlvbkFkZGVkKTtcbiAgICBzY29wZS4kb24oJ3NlY3Rpb24gcmVtb3ZlZCcsIG9uU2VjdGlvblJlbW92ZWQpO1xuXG4gICAgZnVuY3Rpb24gb25BdXRoVG9rZW5DaGFuZ2UoZXZlbnQsIGF1dGhUb2tlbikge1xuICAgICAgdm0uYXV0aFRva2VuID0gYXV0aFRva2VuO1xuICAgICAgdXBkYXRlUmVzdW1lRGF0YShhdXRoVG9rZW4pO1xuICAgICAgcmVuZGVyTGF5b3V0KCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gb25TZWN0aW9uQWRkZWQoZXZlbnQsIHNlY3Rpb25JbmRleCkge1xuICAgICAgdmFyIG5ld1NlY3Rpb24gPSBhbmd1bGFyLmV4dGVuZCh7fSwgdm0ucmVzdW1lLnNlY3Rpb25zW3NlY3Rpb25JbmRleF0pO1xuICAgICAgXG4gICAgICB2bS5yZXN1bWUuc2VjdGlvbnMuc3BsaWNlKHNlY3Rpb25JbmRleCwgMCwgbmV3U2VjdGlvbik7XG4gICAgICBlbWl0QWRkU2VjdGlvbihuZXdTZWN0aW9uLCBzZWN0aW9uSW5kZXgpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIG9uU2VjdGlvblJlbW92ZWQoZXZlbnQsIHNlY3Rpb25JbmRleCkge1xuICAgICAgdm0ucmVzdW1lLnNlY3Rpb25zLnNwbGljZShzZWN0aW9uSW5kZXgsIDEpO1xuICAgICAgZW1pdFJlbW92ZVNlY3Rpb24oc2VjdGlvbkluZGV4KTtcbiAgICB9XG5cbiAgICAvKiBQUklWQVRFIEZVTkNUSU9OUyAqL1xuICAgIGZ1bmN0aW9uIHVwZGF0ZVJlc3VtZURhdGEoYXV0aFRva2VuKSB7XG4gICAgICByZXN1bWVTZXJ2aWNlLmdldFJlc3VtZURhdGEoYXV0aFRva2VuKVxuICAgICAgICAudGhlbihmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgIHZtLnJlc3VtZSA9IGRhdGE7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlbmRlckxheW91dCgpIHtcbiAgICAgIHZhciBjb250YWluZXIgPSBhbmd1bGFyLmVsZW1lbnQoJ2Rpdi5tYXJnaW5zJyk7XG5cbiAgICAgIGxheW91dFNlcnZpY2UuZ2V0VGVtcGxhdGUoKVxuICAgICAgICAudGhlbihmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgIGNvbnRhaW5lci5odG1sKGRhdGEpO1xuICAgICAgICAgICRjb21waWxlKGNvbnRhaW5lci5jb250ZW50cygpKSgkc2NvcGUpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBlbWl0QWRkU2VjdGlvbihuZXdTZWN0aW9uLCBzZWN0aW9uSW5kZXgpIHtcbiAgICAgIGlmICh2bS5hdXRoVG9rZW4gJiYgdm0uYXV0aFRva2VuICE9PSAnZGVmYXVsdCcpIHtcbiAgICAgICAgdmFyIGRhdGEgPSB7XG4gICAgICAgICAgYXV0aFRva2VuOiB2bS5hdXRoVG9rZW4sXG4gICAgICAgICAgbmV3U2VjdGlvbjogbmV3U2VjdGlvbixcbiAgICAgICAgICBzZWN0aW9uSW5kZXg6IHNlY3Rpb25JbmRleFxuICAgICAgICB9O1xuXG4gICAgICAgIHNvY2tldC5lbWl0KCdhZGQtc2VjdGlvbicsIGRhdGEpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGVtaXRSZW1vdmVTZWN0aW9uKHNlY3Rpb25JbmRleCkge1xuICAgICAgaWYgKHZtLmF1dGhUb2tlbiAmJiB2bS5hdXRoVG9rZW4gIT09ICdkZWZhdWx0Jykge1xuICAgICAgICB2YXIgZGF0YSA9IHtcbiAgICAgICAgICBhdXRoVG9rZW46IHZtLmF1dGhUb2tlbixcbiAgICAgICAgICBzZWN0aW9uSW5kZXg6IHNlY3Rpb25JbmRleFxuICAgICAgICB9O1xuXG4gICAgICAgIHNvY2tldC5lbWl0KCdyZW1vdmUtc2VjdGlvbicsIGRhdGEpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFRPRE86IGZpeCBidWdzIHRoYXQgb2NjdXIgd2hlbiBzb3J0aW5nIHNlY3Rpb25zIHRoYXQgaGF2ZSBiZWVuIGVkaXRlZFxuICAgIGZ1bmN0aW9uIGVtaXRTb3J0YWJsZVVwZGF0ZSgpIHtcbiAgICAgIGlmICh2bS5hdXRoVG9rZW4gJiYgdm0uYXV0aFRva2VuICE9PSAnZGVmYXVsdCcpIHtcbiAgICAgICAgdmFyIGRhdGEgPSB7XG4gICAgICAgICAgYXV0aFRva2VuOiB2bS5hdXRoVG9rZW4sXG4gICAgICAgICAgc2VjdGlvbnM6IHZtLnJlc3VtZS5zZWN0aW9uc1xuICAgICAgICB9O1xuXG4gICAgICAgIHNvY2tldC5lbWl0KCdzb3J0YWJsZS1ldmVudCcsIGRhdGEpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qIFBVQkxJQyBGVU5DVElPTiBJTVBMRU1FTlRBVElPTlMgKi9cbiAgICBmdW5jdGlvbiBpbml0KCkge1xuICAgICAgdmFyIGF1dGhUb2tlbiA9IGFuZ3VsYXIuZWxlbWVudCgnI2F1dGhUb2tlbicpLmF0dHIoJ3ZhbHVlJyk7XG4gICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ2F1dGgtdG9rZW4nLCBhdXRoVG9rZW4pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGVtaXQoJGV2ZW50KSB7XG4gICAgICBpZiAodm0uYXV0aFRva2VuICYmIHZtLmF1dGhUb2tlbiAhPT0gJ2RlZmF1bHQnKSB7XG4gICAgICAgIHZhciBkYXRhID0ge1xuICAgICAgICAgIGF1dGhUb2tlbjogdm0uYXV0aFRva2VuLFxuICAgICAgICAgIHBhdGg6ICRldmVudC50YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhJyksXG4gICAgICAgICAgdmFsOiAkZXZlbnQudGFyZ2V0LmlubmVySFRNTFxuICAgICAgICB9O1xuXG4gICAgICAgIHNvY2tldC5lbWl0KCd2YWx1ZS1jaGFuZ2UnLCBkYXRhKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn0pKCk7XG4iLCIoZnVuY3Rpb24oKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwJylcbiAgICAuY29udHJvbGxlcignYXV0aEN0cmwnLCBhdXRoQ3RybCk7XG5cbiAgYXV0aEN0cmwuJGluamVjdCA9IFsnJHJvb3RTY29wZScsICckc2NvcGUnLCAnYXV0aFNlcnZpY2UnLCAnc29ja2V0J107XG5cbiAgZnVuY3Rpb24gYXV0aEN0cmwoJHJvb3RTY29wZSwgJHNjb3BlLCBhdXRoU2VydmljZSwgc29ja2V0KSB7XG4gICAgdmFyIHZtID0gdGhpcztcbiAgICB2YXIgc3VVc2VybmFtZSA9IGFuZ3VsYXIuZWxlbWVudCgnI3N1VXNlcm5hbWUnKTtcblxuICAgIC8qIFZJRVdNT0RFTCBCSU5ESU5HUyAqL1xuICAgIHZtLnN1VXNlcm5hbWU7XG4gICAgdm0uc3VQYXNzd29yZDtcbiAgICB2bS5zdVVzZXJuYW1lRXJyb3IgPSAnJztcbiAgICB2bS5zdUVycm9yID0gJyc7XG5cbiAgICB2bS5saVVzZXJuYW1lO1xuICAgIHZtLmxpUGFzc3dvcmQ7XG4gICAgdm0ubGlFcnJvciA9ICcnO1xuXG4gICAgdm0uc2lnbnVwID0gc2lnbnVwO1xuICAgIHZtLmxvZ2luID0gbG9naW47XG4gICAgdm0ubG9nb3V0ID0gbG9nb3V0O1xuICAgIHZtLnN1VG9vbHRpcCA9IHN1VG9vbHRpcDtcbiAgICB2bS52YWxpZGF0ZVVzZXIgPSB2YWxpZGF0ZVVzZXI7XG5cbiAgICAvKiBFVkVOVCBMSVNURU5FUlMgKFNPQ0tFVC5JTykgKi9cbiAgICBzb2NrZXQub24oJ3VzZXJuYW1lIGF2YWlsYWJsZScsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHN1VXNlcm5hbWUucmVtb3ZlQ2xhc3MoJ3VuYXZhaWxhYmxlJyk7XG4gICAgfSk7XG5cbiAgICBzb2NrZXQub24oJ3VzZXJuYW1lIHVuYXZhaWxhYmxlJywgZnVuY3Rpb24gKHVzZXIpIHtcbiAgICAgIHN1VXNlcm5hbWUuYWRkQ2xhc3MoJ3VuYXZhaWxhYmxlJyk7XG4gICAgICAvLyB2bS5zdVNvY2tldE1zZyA9IHVzZXIudXNlcm5hbWUgKyAnIGlzIGFscmVhZHkgdGFrZW4uJztcbiAgICB9KTtcblxuICAgIC8qIFBSSVZBVEUgRlVOQ1RJT05TICovXG4gICAgZnVuY3Rpb24gdXBkYXRlQXV0aFRva2VuKGF1dGhUb2tlbikge1xuICAgICAgYW5ndWxhci5lbGVtZW50KCcjYXV0aFRva2VuJykuYXR0cigndmFsdWUnLCBhdXRoVG9rZW4pO1xuICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KCdhdXRoLXRva2VuJywgYXV0aFRva2VuKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjbGVhbnVwTW9kYWwoZWxlbWVudElEKSB7XG4gICAgICBhbmd1bGFyLmVsZW1lbnQoZWxlbWVudElEKS5tb2RhbCgnaGlkZScpO1xuICAgICAgc3VDbGVhcigpO1xuICAgICAgbGlDbGVhcigpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHN1Q2xlYXIoKSB7XG4gICAgICBhbmd1bGFyLmVsZW1lbnQoJyNzdVBhc3N3b3JkJykudG9vbHRpcCgnaGlkZScpO1xuICAgICAgdm0uc3VVc2VybmFtZSA9ICcnO1xuICAgICAgdm0uc3VQYXNzd29yZCA9ICcnO1xuICAgICAgdm0uc3VFcnJvciA9ICcnO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxpQ2xlYXIoKSB7XG4gICAgICB2bS5saVVzZXJuYW1lID0gJyc7XG4gICAgICB2bS5saVBhc3N3b3JkID0gJyc7XG4gICAgICB2bS5saUVycm9yID0gJyc7XG4gICAgfVxuXG4gICAgLyogUFVCTElDIEZVTkNUSU9OIElNUExFTUVOVEFUSU9OUyAqL1xuICAgIGZ1bmN0aW9uIHNpZ251cCgpIHtcbiAgICAgIGF1dGhTZXJ2aWNlLnNpZ251cCh2bS5zdVVzZXJuYW1lLCB2bS5zdVBhc3N3b3JkKVxuICAgICAgICAudGhlbihmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgIGlmIChkYXRhLm1lc3NhZ2UpIHtcbiAgICAgICAgICAgIHZtLnN1RXJyb3IgPSBkYXRhLm1lc3NhZ2U7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHVwZGF0ZUF1dGhUb2tlbihkYXRhLmlkKTtcbiAgICAgICAgICAgIGNsZWFudXBNb2RhbCgnI3N1TW9kYWwnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxvZ2luKCkge1xuICAgICAgYXV0aFNlcnZpY2UubG9naW4odm0ubGlVc2VybmFtZSwgdm0ubGlQYXNzd29yZClcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICBpZiAoZGF0YS5tZXNzYWdlKSB7XG4gICAgICAgICAgICB2bS5saUVycm9yID0gZGF0YS5tZXNzYWdlXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHVwZGF0ZUF1dGhUb2tlbihkYXRhLmlkKTtcbiAgICAgICAgICAgIGNsZWFudXBNb2RhbCgnI2xpTW9kYWwnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxvZ291dCgpIHtcbiAgICAgIGF1dGhTZXJ2aWNlLmxvZ291dCgpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJyNhdXRoVG9rZW4nKS5hdHRyKCd2YWx1ZScsICdkZWZhdWx0Jyk7XG4gICAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KCdhdXRoLXRva2VuJywgJ2RlZmF1bHQnKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc3VUb29sdGlwKCRldmVudCkge1xuICAgICAgLy8gVE9ETzogdXNlIHJlZmVyZW5jZSB0byBuZy1taW5sZW5ndGggaW5zdGVhZCBvZiBoYXJkY29kaW5nICc2J1xuICAgICAgaWYgKCRldmVudC50YXJnZXQudmFsdWUubGVuZ3RoIDwgNikge1xuICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJGV2ZW50LnRhcmdldCkudG9vbHRpcCgnc2hvdycpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYW5ndWxhci5lbGVtZW50KCRldmVudC50YXJnZXQpLnRvb2x0aXAoJ2hpZGUnKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiB2YWxpZGF0ZVVzZXIoKSB7XG4gICAgICB2YXIgZGF0YSA9IHt1c2VybmFtZTogdm0uc3VVc2VybmFtZX07XG4gICAgICAvLyB2bS5zdVNvY2tldE1zZyA9ICcnO1xuICAgICAgc29ja2V0LmVtaXQoJ3VzZXJuYW1lJywgZGF0YSk7XG4gICAgfVxuICB9XG59KSgpO1xuIiwiKGZ1bmN0aW9uKCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcpXG4gICAgLmRpcmVjdGl2ZSgncHJBZGQnLCBwckFkZCk7XG5cbiAgcHJBZGQuJGluamVjdCA9IFsnJHJvb3RTY29wZSddO1xuXG4gIGZ1bmN0aW9uIHByQWRkKCRyb290U2NvcGUpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcmVzdHJpY3Q6ICdFJyxcbiAgICAgIHRlbXBsYXRlOiAnPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJjbG9zZVwiPjxzcGFuPis8L3NwYW4+PC9idXR0b24+JyxcbiAgICAgIGxpbms6IGxpbmtcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gbGluayhzY29wZSwgZWxlbWVudCwgYXR0cnMpIHtcbiAgICAgIHNjb3BlLmFkZCA9IGZ1bmN0aW9uIChldmVudCwgc2VjdGlvbkluZGV4KSB7XG4gICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgnc2VjdGlvbiBhZGRlZCcsIHNlY3Rpb25JbmRleCk7XG4gICAgICB9XG5cbiAgICAgIGVsZW1lbnQucGFyZW50KCkuYmluZCgnbW91c2VlbnRlcicsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZWxlbWVudC5zaG93KCk7XG4gICAgICB9KTtcblxuICAgICAgZWxlbWVudC5wYXJlbnQoKS5iaW5kKCdtb3VzZWxlYXZlJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBlbGVtZW50LmhpZGUoKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufSkoKTtcbiIsIihmdW5jdGlvbigpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAnKVxuICAgIC5kaXJlY3RpdmUoJ3ByUmVtb3ZlJywgcHJSZW1vdmUpO1xuXG4gIHByUmVtb3ZlLiRpbmplY3QgPSBbJyRyb290U2NvcGUnXTtcblxuICBmdW5jdGlvbiBwclJlbW92ZSgkcm9vdFNjb3BlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlc3RyaWN0OiAnRScsXG4gICAgICB0ZW1wbGF0ZTogJzxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiY2xvc2VcIj48c3Bhbj7Dlzwvc3Bhbj48L2J1dHRvbj4nLFxuICAgICAgbGluazogbGlua1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBsaW5rKHNjb3BlLCBlbGVtZW50LCBhdHRycykge1xuICAgICAgc2NvcGUucmVtb3ZlID0gZnVuY3Rpb24gKGV2ZW50LCBzZWN0aW9uSW5kZXgpIHtcbiAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KCdzZWN0aW9uIHJlbW92ZWQnLCBzZWN0aW9uSW5kZXgpO1xuICAgICAgfVxuXG4gICAgICBlbGVtZW50LnBhcmVudCgpLmJpbmQoJ21vdXNlZW50ZXInLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGVsZW1lbnQuc2hvdygpO1xuICAgICAgfSk7XG5cbiAgICAgIGVsZW1lbnQucGFyZW50KCkuYmluZCgnbW91c2VsZWF2ZScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZWxlbWVudC5oaWRlKCk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn0pKCk7XG4iLCIoZnVuY3Rpb24oKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwJylcbiAgICAuZmlsdGVyKCd1bmVzY2FwZWQnLCB1bmVzY2FwZWQpO1xuXG4gIHVuZXNjYXBlZC4kaW5qZWN0ID0gWyckc2NlJ107XG5cbiAgZnVuY3Rpb24gdW5lc2NhcGVkKCRzY2UpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHZhbCkge1xuICAgICAgcmV0dXJuICRzY2UudHJ1c3RBc0h0bWwodmFsKTtcbiAgICB9O1xuICB9XG59KSgpO1xuIiwiKGZ1bmN0aW9uKCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcpXG4gICAgLmZhY3RvcnkoJ2F1dGhTZXJ2aWNlJywgYXV0aFNlcnZpY2UpO1xuXG4gIGF1dGhTZXJ2aWNlLiRpbmplY3QgPSBbJyRodHRwJywgJyRsb2cnXTtcblxuICBmdW5jdGlvbiBhdXRoU2VydmljZSgkaHR0cCwgJGxvZykge1xuICAgIHJldHVybiB7XG4gICAgICBzaWdudXA6IHNpZ251cCxcbiAgICAgIGxvZ2luOiBsb2dpbixcbiAgICAgIGxvZ291dDogbG9nb3V0XG4gICAgfTtcblxuICAgIC8vLy8vLy8vLy8vL1xuXG4gICAgZnVuY3Rpb24gc2lnbnVwKHVzZXJuYW1lLCBwYXNzd29yZCkge1xuICAgICAgdmFyIGRhdGEgPSB7XG4gICAgICAgIHVzZXJuYW1lOiB1c2VybmFtZSxcbiAgICAgICAgcGFzc3dvcmQ6IHBhc3N3b3JkXG4gICAgICB9O1xuXG4gICAgICByZXR1cm4gJGh0dHAucG9zdCgnL3NpZ251cCcsIGRhdGEpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uIHN1Y2Nlc3NDYWxsYmFjayhyZXNwb25zZSkge1xuICAgICAgICAgIHJldHVybiByZXNwb25zZS5kYXRhO1xuICAgICAgICB9LCBmdW5jdGlvbiBlcnJvckNhbGxiYWNrKHJlc3BvbnNlKSB7XG4gICAgICAgICAgJGxvZy5lcnJvcignWEhSIEZhaWxlZCBmb3IgYXV0aFNlcnZpY2Uuc2lnbnVwJyk7XG4gICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGE7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxvZ2luKHVzZXJuYW1lLCBwYXNzd29yZCkge1xuICAgICAgdmFyIGRhdGEgPSB7XG4gICAgICAgIHVzZXJuYW1lOiB1c2VybmFtZSxcbiAgICAgICAgcGFzc3dvcmQ6IHBhc3N3b3JkXG4gICAgICB9O1xuXG4gICAgICByZXR1cm4gJGh0dHAucG9zdCgnL2xvZ2luJywgZGF0YSlcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24gc3VjY2Vzc0NhbGxiYWNrKHJlc3BvbnNlKSB7XG4gICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGE7XG4gICAgICAgIH0sIGZ1bmN0aW9uIGVycm9yQ2FsbGJhY2socmVzcG9uc2UpIHtcbiAgICAgICAgICAkbG9nLmVycm9yKCdYSFIgRmFpbGVkIGZvciBhdXRoU2VydmljZS5sb2dpbicpO1xuICAgICAgICAgIHJldHVybiByZXNwb25zZS5kYXRhO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsb2dvdXQoKSB7XG4gICAgICByZXR1cm4gJGh0dHAucG9zdCgnL2xvZ291dCcpXG4gICAgICAgIC5jYXRjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgJGxvZy5lcnJvcignWEhSIEZhaWxlZCBmb3IgYXV0aFNlcnZpY2UubG9nb3V0Jyk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgfVxufSkoKTtcbiIsIihmdW5jdGlvbigpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAnKVxuICAgIC5mYWN0b3J5KCdsYXlvdXRTZXJ2aWNlJywgbGF5b3V0U2VydmljZSk7XG5cbiAgbGF5b3V0U2VydmljZS4kaW5qZWN0ID0gWyckaHR0cCcsICckbG9nJ107XG5cbiAgZnVuY3Rpb24gbGF5b3V0U2VydmljZSgkaHR0cCwgJGxvZykge1xuICAgIHJldHVybiB7XG4gICAgICBnZXRUZW1wbGF0ZTogZ2V0VGVtcGxhdGVcbiAgICB9O1xuXG4gICAgLy8vLy8vLy8vLy8vXG5cbiAgICBmdW5jdGlvbiBnZXRUZW1wbGF0ZShpZCkge1xuICAgICAgdmFyIGlkID0gaWQgfHwgJ2RlZmF1bHQnO1xuXG4gICAgICByZXR1cm4gJGh0dHAuZ2V0KCcvdGVtcGxhdGU/dGVtcGxhdGVJRD0nICsgaWQpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgIHJldHVybiByZXNwb25zZS5kYXRhO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICRsb2cuZXJyb3IoJ1hIUiBGYWlsZWQgZm9yIGdldFRlbXBsYXRlJyk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgfVxufSkoKTtcbiIsIihmdW5jdGlvbigpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAnKVxuICAgIC5mYWN0b3J5KCdyZXN1bWVTZXJ2aWNlJywgcmVzdW1lU2VydmljZSk7XG5cbiAgcmVzdW1lU2VydmljZS4kaW5qZWN0ID0gWyckaHR0cCcsICckbG9nJ107XG5cbiAgZnVuY3Rpb24gcmVzdW1lU2VydmljZSgkaHR0cCwgJGxvZykge1xuICAgIHJldHVybiB7XG4gICAgICBnZXRSZXN1bWVEYXRhOiBnZXRSZXN1bWVEYXRhXG4gICAgfTtcblxuICAgIC8vLy8vLy8vLy8vL1xuXG4gICAgZnVuY3Rpb24gZ2V0UmVzdW1lRGF0YShhdXRoVG9rZW4pIHtcbiAgICAgIHZhciBkYXRhID0ge2F1dGhUb2tlbjogYXV0aFRva2VufTtcblxuICAgICAgcmV0dXJuICRodHRwLnBvc3QoJy9yZXN1bWUnLCBkYXRhKVxuICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAkbG9nLmVycm9yKCdYSFIgRmFpbGVkIGZvciBnZXRSZXN1bWVEYXRhJyk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgfVxufSkoKTtcbiIsIihmdW5jdGlvbigpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAnKVxuICAgIC5mYWN0b3J5KCdzb2NrZXQnLCBzb2NrZXQpO1xuXG4gIHNvY2tldC4kaW5qZWN0ID0gWyckcm9vdFNjb3BlJ107XG5cbiAgZnVuY3Rpb24gc29ja2V0KCRyb290U2NvcGUpIHtcbiAgICB2YXIgc29ja2V0ID0gaW8uY29ubmVjdCgpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIG9uOiBvbixcbiAgICAgIGVtaXQ6IGVtaXRcbiAgICB9O1xuXG4gICAgLy8vLy8vLy8vLy8vXG5cbiAgICBmdW5jdGlvbiBvbihldmVudE5hbWUsIGNhbGxiYWNrKSB7XG4gICAgICBzb2NrZXQub24oZXZlbnROYW1lLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBhcmdzID0gYXJndW1lbnRzO1xuICAgICAgICAkcm9vdFNjb3BlLiRhcHBseShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgY2FsbGJhY2suYXBwbHkoc29ja2V0LCBhcmdzKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBlbWl0KGV2ZW50TmFtZSwgZGF0YSwgY2FsbGJhY2spIHtcbiAgICAgIHNvY2tldC5lbWl0KGV2ZW50TmFtZSwgZGF0YSwgZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgYXJncyA9IGFyZ3VtZW50cztcbiAgICAgICAgJHJvb3RTY29wZS4kYXBwbHkoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgICAgICAgY2FsbGJhY2suYXBwbHkoc29ja2V0LCBhcmdzKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSlcbiAgICB9XG4gIH1cbn0pKCk7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
